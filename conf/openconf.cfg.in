# Copyright (c) 2016, Jean Guyomarc'h <jean@guyomarch.bzh>
#
# This file is part of SBXG
#
# SBXG is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# SBXG is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with SBXG.  If not, see <http://www.gnu.org/licenses/>.


mainmenu "SBXG Configuration"

config DEBUG_SBXG
   bool "Enable strong SBXG debug"
   default n
   help
      Unless you are an SBXG developer, you should say N here.

#==============================================================================#
#                         Board Selection Configuration                        #
#==============================================================================#

menu "Board and System Selection"
   source "@MANIFEST_CFG@"
   config USE_BUILTIN_CONFIG
      bool "Use a Built-In Configuration"
      default y
      help
         Say Y here if you want to choose among the various kernel configuration
         provided by the manifest you selected.
         If you choose N, SBXG will attempt a default configuration.
   source "@KERNEL_CONFIGS_CFG@"
endmenu


#==============================================================================#
#                            Toolchain Configuration                           #
#==============================================================================#

menu "Toolchain"
   choice
      prompt "Toolchain Origin"

   config TOOLCHAIN_AUTOMATIC
      bool "Automatic Download"
      default y
      help
         If this option is selected, the toolchain will be downloaded from
         Linaro's website. The compiler version and eabi are determined by
         SBXG.

   config TOOLCHAIN_PREFIX_CHOICE
      bool "Installed Prefix"
      help
         If you have a toolchain installed on your system, you may not want
         SBXG to download one, although this is strongly advised. By saying
         Y here, you will be able to manually give SBXG the toolchain's
         prefix.

#  config TOOLCHAIN_URL_CHOICE
#     bool "Custom URL"
#     help
#        If SBXG's toolchain does not suit your needs, you can override the
#        URL to be downloaded by manually providing an URL to SBXG. Note that
#        the file downloaded MUST be able to decompressed automatically via tar.
#        This means that your tar can automatically choose a decompression
#        algorithm regarding its inputs. If you can do tar -xf <archive>, this
#        will do fine.

   endchoice

   if TOOLCHAIN_PREFIX_CHOICE
      config TOOLCHAIN_PREFIX
         string "Toolchain Prefix"
         help
            Fill in here the prefix to your compiler. For instance, if you want
            to use arm-linux-gnueabihf-gcc, your prefix is arm-linux-gnueabifh-
            (with the trailing hyphen).
   endif

#  if TOOLCHAIN_URL_CHOICE
#     config TOOLCHAIN_URL
#     string "Toolchain URL"
#     help
#        Fill in here the URL of the toolchain to be downloaded. As mentioned in
#        the help of the Toolchain Origin, the dowloaded archive MUST be
#        decompressed with tar guessing the decompression algorithm.
#
#     # TODO There is more (directory), ...
#  endif

   config JOBS
      int "Parallel Jobs"
      default @PARALLEL_JOBS@
      range 1 9999
      help
         Number of jobs make should launch in parallel.

   config QEMU_ARM_STATIC
      string "Qemu Arm Static"
      default "qemu-arm-static"
      help
         Binary used to handle foreign binary format (binfmt).
endmenu


#==============================================================================#
#                      Distribution Configuration Options                      #
#==============================================================================#

menu "Distribution"
   config DEBOOTSTRAP_DISTRIBUTION
      string "Debootstrap Distribution"
      default "stable"
      help
         Distribution to be fetched by Debootstrap.
         For Debian distributions, these values can be a value among (for example):
         - sid
         - jessie
         - stable
         - unstable

   config DEBOOTSTRAP_MIRROR
      string "Debootstrap Mirror"
      default "http://ftp.debian.org/debian"
      help
         Debootstrap Mirror

   config DEBOOTSTRAP
      string "Debootstrap Program"
      default "/usr/sbin/debootstrap"
      help
         Debootstrap program to use

   config DEBOOTSTRAP_HTTP_PROXY
      string "Debootstrap HTTP Proxy"
      default "$http_proxy"
      help
         HTTP proxy to be used by Debootstrap

   config PACKAGES
      string "Extra Packages (space-separated)"
      default "locales ntp vim sudo openssh-server python python-apt firmware-atheros firmware-brcm80211 firmware-ralink firmware-realtek vlan bridge-utils usbutils wireless-tools"
      help
         Packages to be installed.
         This list should be kept to a minimum. SBXG's purpose is NOT
         to craft a full-custom rootfs!

   config ROOT_PASSWORD
      string "Root Password"
      default "root"

   config ADMIN_USERNAME
      string "Administrator Account Username"
      default "admin"

   config ADMIN_PASSWORD
      string "Admin password"
      default "admin"

   config ADMIN_UID
      int "Admin UID"
      range 1000 65536
      default 1000

   config ADMIN_GID
      int "Admin GID"
      range 1000 65536
      default 1000

   config ADMIN_AUTHORIZED_KEYS
      string "Public SSH keys"
      help
         A comma-separated list of public SSH keys to add to the Admin user.

   config HOSTNAME
      string "Hostname"
      default "board-sbxg"

endmenu


#==============================================================================#
#                        Kernel Generation Configuration                       #
#==============================================================================#

menu "Kernel"
   config DISABLE_PAX_PLUGINS
      bool "Disable PaX Plugins"
      default n
      help
         If your kernel support Grsecurity, you might not want to enable PaX
         plugins for GCC. They require that the gcc bundled by your toolchain
         to support plugins.
         Say Y here if your toolchain does not support plugins.

   config USE_MAKE_KPKG
      bool "Generate Debian Kernel Packages"
      default n
      select MAKE_KPKG_KERNEL_IMAGE
      help
         Activate this option to enable building Debian kernel packages
         with make-kpkg. You must install make-kpkg.

   if USE_MAKE_KPKG
      config INSTALL_DEBIAN_KERNEL_PACKAGE
         bool "Install Kernel and Modules as Debian packages"
         default y if USE_MAKE_KPKG
         help
            The Kernel Image and its modules will be handled exclusively
            via Debian packages generated by SBXG.
   endif


   menu "Debian Kernel Packages"
      visible if USE_MAKE_KPKG

      config MAKE_KPKG_KERNEL_IMAGE
         bool "Kernel Image"
         default n
         help
            Build a Debian package of the Kernel image

      config MAKE_KPKG_KERNEL_HEADERS
         bool "Kernel Headers"
         default n
         help
            Build a Debian package of the Kernel headers

      config MAKE_KPKG_KERNEL_DOC
         bool "Kernel Documentation"
         default n
         help
            Build a Debian package of the Kernel documentation

      config MAKE_KPKG_KERNEL_SOURCE
         bool "Kernel Source"
         default n
         help
            Build a Debian package of the Kernel sources
   endmenu
endmenu


#==============================================================================#
#                              Boot Configuration                              #
#==============================================================================#

menu "Boot Configuration"
   config EXTRA_BOOTARGS
      string "Extra U-Boot bootargs"
      help
         Enter here extra bootargs that will be added to the generated U-Boot
         script. These bootargs will be forwarded to the kernel boot command.

endmenu

#==============================================================================#
#                        Image Generation Configuration                        #
#==============================================================================#

menu "Image"
   config IMAGE_HASH_SHA1
      bool "Hash SHA1"
      default n

   config IMAGE_HASH_SHA256
      bool "Hash SHA256"
      default y

   choice
      prompt "Image Compression"
      default IMAGE_COMPRESSION_NONE
      help
         Compresion type of the final image

      config IMAGE_COMPRESSION_NONE
         bool "None"
      config IMAGE_COMPRESSION_GZ
         bool "Gzip"
      config IMAGE_COMPRESSION_BZIP
         bool "Bzip"
      config IMAGE_COMPRESSION_XZ
         bool "Xz"
   endchoice
endmenu


#==============================================================================#
#                           Config From Build System                           #
#==============================================================================#

@EXTRA_CONFIG@
